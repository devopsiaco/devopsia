/* ===== Design Tokens ===== */
:root{
  /* Colors */
  --bg: #ffffff;
  --fg: #1f2937;       /* gray-800 */
  --muted: #4b5563;    /* gray-600 */
  --border: #e5e7eb;   /* gray-200 */
  --panel: #f9fafb;    /* gray-50 */
  --panel-2: #f3f4f6;  /* gray-100 */
  --brand: #16a34a;    /* green-600 */
  --brand-contrast: #ffffff;
  --danger: #ef4444;
  --danger-strong: #b91c1c;

  /* Radius, spacing, shadow */
  --r-sm: .25rem;
  --r-md: .375rem;
  --r-lg: .5rem;
  --pad-2: .5rem;
  --pad-3: .75rem;
  --pad-4: 1rem;
  --gap-2: .5rem;
  --gap-3: .75rem;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --container: 72rem; /* 1152px */
}

/* ===== Resets & helpers ===== */
.hidden{display:none!important;}
.nowrap{white-space:nowrap;}
.break-words{overflow-wrap:break-word;word-break:break-word;}
.code{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;}

/* ===== Layout utilities ===== */
.container{max-width:var(--container);margin-inline:auto;padding-inline:1rem;}
.flex{display:flex;}
.grid{display:grid;}
.items-center{align-items:center;}
.justify-between{justify-content:space-between;}
.justify-end{justify-content:flex-end;}
.gap-2{gap:var(--gap-2);}
.gap-3{gap:var(--gap-3);}

/* ===== Spacing ===== */
.p-2{padding:var(--pad-2);}
.p-3{padding:var(--pad-3);}
.p-4{padding:var(--pad-4);}
.px-3{padding-inline:var(--pad-3);}
.py-1{padding-block:.25rem;}
.mt-2{margin-top:.5rem;}
.mr-2{margin-right:.5rem;}
.ml-2{margin-left:.5rem;}

/* ===== Typography ===== */
.text{color:var(--fg);}
.text-muted{color:var(--muted);}
.text-danger{color:var(--danger);}
.text-xs{font-size:.75rem;line-height:1rem;}
.text-sm{font-size:.875rem;line-height:1.25rem;}
.bold{font-weight:600;}

/* ===== Surfaces ===== */
.card{
  background:var(--bg);
  border:1px solid var(--border);
  border-radius:var(--r-lg);
  box-shadow:var(--shadow-sm);
  padding:var(--pad-4);
}

/* ===== Buttons ===== */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.375rem;
  font-size:.875rem;line-height:1.25rem;font-weight:600;
  padding:.5rem .75rem;border-radius:var(--r-md);
  border:1px solid transparent;cursor:pointer;text-decoration:none;
}
.btn:focus-visible{outline:2px solid #111;outline-offset:2px;}
.btn-ghost{background:#e5e7eb;color:#111;border-color:#e5e7eb;}
.btn-ghost:hover{background:#d1d5db;}
.btn-danger{background:var(--danger);color:#fff;}
.btn-danger:hover{background:var(--danger-strong);}
.icon-btn{width:24px;height:24px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;}

/* ===== Badges ===== */
.badge{display:inline-block;font-size:.75rem;padding:.25rem .5rem;border-radius:var(--r-md);background:var(--panel-2);}

/* ===== Prompt History components ===== */
history-item{comp:initial;} /* marker for grep */
.history-item{background:#fff;border:1px solid var(--border);border-radius:var(--r-lg);box-shadow:var(--shadow-sm);padding:var(--pad-4);}
.history-grid{display:grid;align-items:center;gap:var(--gap-3);grid-template-columns:40px 1fr auto;}
.star-btn{width:24px;height:24px;display:flex;align-items:center;justify-content:center;line-height:1;font-size:1.25rem;cursor:pointer;}
.prompt-text{color:var(--fg);}
.history-item.is-collapsed .prompt-text{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;}
.meta-wrap{display:flex;align-items:center;gap:var(--gap-3);justify-content:flex-end;font-size:.875rem;color:var(--muted);}
.history-body{margin-top:.5rem;white-space:pre-wrap;font-size:.875rem;background:var(--panel);padding:.75rem;border-radius:var(--r-md);border:1px solid var(--border);}
@media (max-width:640px){
  .history-grid{grid-template-columns:40px 1fr;}
  .meta-wrap{grid-column:1 / -1;justify-content:flex-start;margin-top:.5rem;}
}
/// ===== Assistant Layout =====
.app-grid{display:grid;grid-template-columns:240px 1fr;gap:1rem;}
@media (max-width:1024px){.app-grid{grid-template-columns:1fr;}}
.sidebar{
  position:sticky; top:1rem;
  background:#fff;border:1px solid var(--border);border-radius:var(--r-lg);
  box-shadow:var(--shadow-sm);padding:var(--pad-4);
  height:fit-content;
}
.sidebar h2{margin:0 0 .5rem 0;font-size:.875rem;color:var(--muted);}
.nav-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.25rem;}
.nav-item a{
  display:flex;align-items:center;gap:.5rem;
  text-decoration:none;color:#111;padding:.5rem .5rem;border-radius:.375rem;
}
.nav-item a:hover{background:var(--panel-2);}
.nav-item a.active{background:#ecfdf5;border:1px solid #bbf7d0;}
.nav-foot{margin-top:1rem;border-top:1px dashed var(--border);padding-top:.75rem;display:flex;flex-direction:column;gap:.25rem;}

.main-panel{display:block;}
.page-head{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem;}
.breadcrumbs{font-size:.875rem;color:var(--muted);}
.page-title{font-size:1.25rem;font-weight:600;color:#111;}

.toolbar{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;}
.select,.input,.textarea{
  width:100%;max-width:none;
  border:1px solid var(--border);border-radius:.375rem;background:#fff;color:#111;
}
.select{height:2.25rem;padding:.25rem .5rem;}
.input{height:2.25rem;padding:.25rem .5rem;}
.textarea{min-height:140px;padding:.5rem;resize:vertical;}
.field{display:flex;flex-direction:column;gap:.375rem;}

.panel{
  background:#fff;border:1px solid var(--border);border-radius:var(--r-lg);box-shadow:var(--shadow-sm);
  padding:1rem;
}
.panel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem;}
.panel-title{font-weight:600;}
.panel-actions{display:flex;align-items:center;gap:.5rem;}

.codebox{
  background:#0b1021;color:#e5e7eb;border-radius:.5rem;border:1px solid #1f2937;
  padding:1rem;overflow:auto;white-space:pre;max-height:60vh;
}
.copy-btn{cursor:pointer;}
.helper{font-size:.75rem;color:var(--muted);}

.toast{position:fixed;bottom:1rem;right:1rem;background:#111;color:#fff;
  padding:.5rem .75rem;border-radius:.375rem;box-shadow:var(--shadow-sm);display:none;}
.toast.show{display:block;}

.safe-top{padding-top:1rem;} /* prevent header overlap if header is sticky/fixed */


/// ===== Buttons (reuse from base) quick aliases =====
.btn-primary{background:var(--brand);color:#fff;border:1px solid var(--brand);}
.btn-primary:hover{filter:brightness(0.95);}
.btn-outline{background:#fff;border:1px solid var(--border);color:#111;}
.btn-outline:hover{background:var(--panel-2);}

/// ===== Badges / pills for modes =====
.pill{display:inline-flex;align-items:center;gap:.375rem;font-size:.75rem;
  padding:.25rem .5rem;border-radius:999px;background:var(--panel-2);color:#111;}
.pill.lock::before{content:"üîí";}
.pill.spark::before{content:"‚ö°";}
.pill.shield::before{content:"üõ°Ô∏è";}
